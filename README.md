# Автотесты API Stellar Burgers

Проект автоматизированного тестирования API для сервиса Stellar Burgers.

## Описание

Данный проект содержит полный набор автотестов для API Stellar Burgers, включающий тестирование:
- Регистрации и авторизации пользователей
- Создания и получения заказов
- Работы с пользователями
- Получения ингредиентов

## Структура проекта

```
Diplom_2/
├── tests/                    # Автотесты
│   ├── test_auth.py         # Тесты авторизации
│   ├── test_orders.py       # Тесты заказов
│   └── test_users.py        # Тесты пользователей
├── data/                    # Тестовые данные
│   └── test_data.py         # Константы и ожидаемые ответы
├── helpers/                 # Вспомогательные функции
│   ├── api_client.py        # API клиент
│   └── user_generator.py    # Генератор пользователей
├── conftest.py              # Фикстуры pytest
├── config.py                # Конфигурация
├── pytest.ini              # Настройки pytest
├── requirements.txt         # Зависимости
└── README.md               # Документация
```

##  Установка и запуск

### 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 2. Запуск тестов

#### Запуск всех тестов:
```bash
pytest
```

#### Запуск с генерацией отчета Allure:
```bash
pytest --alluredir=allure-results
allure serve allure-results
```

#### Запуск конкретных тестов:
```bash
# Тесты авторизации
pytest tests/test_auth.py

# Тесты заказов
pytest tests/test_orders.py

# Тесты пользователей
pytest tests/test_users.py
```

#### Запуск с маркерами:
```bash
# Дымовые тесты
pytest -m smoke

# Регрессионные тесты
pytest -m regression

# Тесты авторизации
pytest -m auth
```

## Отчеты

Проект настроен для генерации отчетов в Allure. После запуска тестов с флагом `--alluredir=allure-results`, отчет можно просмотреть командой:

```bash
allure serve allure-results
```

## Покрытие тестов

### Авторизация (`test_auth.py`)
- ✅ Создание уникального пользователя
- ✅ Попытка создания пользователя с существующим email
- ✅ Создание пользователя без обязательных полей (email, password, name)
- ✅ Успешная авторизация
- ✅ Авторизация с неверными учетными данными

### Заказы (`test_orders.py`)
- ✅ Создание заказа с авторизацией
- ✅ Создание заказа без авторизации
- ✅ Создание заказа без ингредиентов
- ✅ Создание заказа с неверными хешами ингредиентов
- ✅ Получение заказов авторизованного пользователя
- ✅ Получение заказов без авторизации
- ✅ Получение списка ингредиентов

### Пользователи (`test_users.py`)
- ✅ Получение информации о пользователе
- ✅ Получение информации без авторизации
- ✅ Обновление информации пользователя
- ✅ Обновление информации без авторизации
- ✅ Выход пользователя
- ✅ Выход без авторизации

## Конфигурация

Основные настройки находятся в файле `config.py`:
- Базовый URL API: `https://stellarburgers.nomoreparties.site`
- Эндпоинты API
- Статус коды ответов
- Тестовые данные

## Принципы разработки

### Структура тестов
- Каждый тест атомарный и тестирует только один сценарий
- Использование фикстур для подготовки данных
- Строгие проверки с точными сравнениями
- Подробные Allure-аннотации

### Организация кода
- Разделение данных и логики
- Использование хелперов для генерации данных
- Принцип DRY (Don't Repeat Yourself)
- Четкое разделение ответственности

### Аннотации Allure
- `@allure.epic()` - для группировки тестов
- `@allure.feature()` - для функциональности
- `@allure.story()` - для пользовательских историй
- `@allure.title()` - для названий тестов
- `with allure.step()` - для шагов внутри тестов

## Технологии

- **Python 3.8+**
- **pytest** - фреймворк для тестирования
- **requests** - HTTP клиент
- **allure-pytest** - генерация отчетов
- **python-dotenv** - работа с переменными окружения

## Поддержка

При возникновении вопросов или проблем, создайте issue в репозитории проекта.

## Лицензия

Проект создан в рамках дипломной работы по автоматизации тестирования. 